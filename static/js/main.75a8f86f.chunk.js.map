{"version":3,"sources":["components/google-map/GoogleMap.module.css","components/point/Point.module.css","components/route/Route.module.css","services/google/GoogleMap.js","services/google/utils.js","utils/db.js","utils/utils.js","utils/dbschema.js","store/slices/pointSlice.js","store/slices/routeSlice.js","components/google-map/GoogleMap.jsx","hooks/usePrevious.js","components/point/Point.jsx","components/point/point-list/PointList.jsx","components/route/Route.jsx","components/app/App.js","reportWebVitals.js","store/slices/locationSlice.js","store/store.js","index.js"],"names":["module","exports","GoogleMap","selector","onMarkerHover","onMarkerClick","this","loader","Loader","apiKey","version","map","mapContainer","document","querySelector","mapOptions","zoom","center","lat","lng","clickableIcons","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","scrollwheel","markers","infoWindows","route","circle","cluster","clearMarkers","forEach","markerData","index","marker","createMarker","push","setPoint","createInfoWindow","addMarkerListeners","group","centeredMap","showOnMap","options","position","coordinates","zIndex","newMarker","google","maps","Marker","data","setZIndex","show","length","setMap","hide","fitBounds","bounds","rebotMapZoom","setCenter","getPosition","setZoom","mapZoom","getZoom","setTimeout","modalTemplate","image","name","infoWindow","InfoWindow","content","addListener","toggleInfoWindow","closeAllInfoWindows","getMap","close","open","_","clear","event","trigger","Promise","resolve","reject","load","then","Map","addMapListeners","Circle","Route","Cluster","catch","error","console","log","markerCluster","MarkerClusterer","imagePath","item","init","extend","LatLngBounds","directionsService","directionsRenderer","waypts","langth","request","origin","waypt","createWaypoint","location","destination","optimizeWaypoints","travelMode","TravelMode","DRIVING","waypoints","splice","response","status","setDirections","window","alert","LatLng","stopover","DirectionsService","DirectionsRenderer","suppressMarkers","preserveViewport","visible","icon","path","SymbolPath","CIRCLE","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWeight","scale","anchor","Point","setPosition","setVisible","points","obj","count","Array","JSON","parse","stringify","hasOwnProperty","Math","random","_id","arrayOfObj","type","pointSlice","createSlice","initialState","activePoint","hoveredPoint","reducers","setActivePoint","state","action","payload","setHoveredPoint","setFiltredPoints","filtredPoints","actions","selectPointSlice","point","routeSlice","addPointToRoute","removePointFromRoute","filter","clearRoute","selectRouteSlice","dispatch","useDispatch","useSelector","value","ref","useRef","useEffect","current","previous","usePrevious","previousHoveredPoint","currentHoveredPoint","useState","gmap","GMap","setMarkers","handleCreateMarker","removeLastMarker","draw","className","styles","wrap","head","onClick","id","props","otherProps","active","hovered","stopPropagation","PointList","style","minWidth","marginRight","onMouseEnter","onMouseLeave","list","display","flexDirection","marginTop","App","justifyContent","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","locationSlice","categories","places","configureStore","reducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"gHACAA,EAAOC,QAAU,CAAC,KAAO,wBAAwB,KAAO,wBAAwB,KAAO,wBAAwB,IAAM,yB,mBCArHD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,KAAO,oBAAoB,QAAU,uBAAuB,OAAS,wB,mBCApHD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,KAAO,oBAAoB,KAAO,sB,uKCSpEC,EAAb,WACE,WAAYC,GAAiD,IAAD,yDAAJ,GAAhCC,EAAoC,EAApCA,cAAeC,EAAqB,EAArBA,cAAqB,oBAC1DC,KAAKC,OAAS,IAAIC,IAAO,CACvBC,OAAQ,0CACRC,QAAS,WAGXJ,KAAKK,IAAM,KACXL,KAAKM,aAAeC,SAASC,cAAcX,GAE3CG,KAAKS,WAAa,CAEhBC,KAAM,EACNC,OAAQ,CACNC,IAAK,YACLC,IAAK,aAEPC,gBAAgB,EAEhBC,aAAa,EACbC,gBAAgB,EAChBC,cAAc,EACdC,mBAAmB,EACnBC,eAAe,EACfC,mBAAmB,EACnBC,aAAa,GAEfrB,KAAKsB,QAAU,GACftB,KAAKuB,YAAc,GAGnBvB,KAAKwB,MAAQ,KACbxB,KAAKyB,OAAS,KACdzB,KAAK0B,QAAU,KAEf1B,KAAKF,cAAgBA,EACrBE,KAAKD,cAAgBA,EApCzB,8CAuCE,WAA0B,IAAD,OAAduB,EAAc,uDAAJ,GAEnBtB,KAAK2B,eAELL,EAAQM,SAAQ,SAACC,EAAYC,GAE3B,IAAMC,EAAS,EAAKC,aAAaH,GAEjC,EAAKP,QAAQW,KAAKF,GAElB,EAAKL,QAAQQ,SAASL,GAEtB,EAAKM,iBAAiBN,GAEtB,EAAKO,mBAAmBL,EAAQD,MAIlC9B,KAAK0B,QAAQW,MAAMrC,KAAKsB,SACxBtB,KAAKsC,gBA1DT,0BA6DE,SAAaP,GAA4B,IAApBQ,EAAmB,wDAChCC,EAAU,CACdC,SAAU,CACR7B,KAAMmB,EAAOW,YAAY9B,IACzBC,KAAMkB,EAAOW,YAAY7B,KAE3B8B,OAAQ,IAmBNJ,IACFC,EAAQnC,IAAML,KAAKK,KAGrB,IAAMuC,EAAY,IAAIC,OAAOC,KAAKC,OAAOP,GAEzC,OAAOI,IA5FX,gCAmGE,SAAmBI,GACjB,IACMjB,EAAS/B,KAAKgC,aAAagB,GADf,GAElBjB,EAAOkB,UAAU,GACjBjD,KAAKsB,QAAQW,KAAKF,GAClB/B,KAAKyB,OAAOyB,KAAKnB,KAxGrB,8BA0GE,WACE/B,KAAKsB,QAAQtB,KAAKsB,QAAQ6B,OAAS,GAAGC,OAAO,MAC7CpD,KAAKyB,OAAO4B,SA5GhB,yBA+GE,WAEE,OAAIrD,KAAKsB,QAAQ6B,OAAS,GACxBnD,KAAKK,IAAIiD,UAAUtD,KAAK0B,QAAQ6B,aAChCvD,KAAKwD,gBAKqB,IAAxBxD,KAAKsB,QAAQ6B,QACfnD,KAAKK,IAAIoD,UAAUzD,KAAKsB,QAAQ,GAAGoC,oBACnC1D,KAAKK,IAAIsD,QAAQ,MAKnB3D,KAAKK,IAAIoD,UAAUzD,KAAKS,WAAWE,aACnCX,KAAKK,IAAIsD,QAAQ3D,KAAKS,WAAWC,SAhIrC,0BAmIE,WAAgB,IAAD,OAGPkD,EAAU5D,KAAKK,IAAIwD,UACzB7D,KAAKK,IAAIsD,QAAQC,EAAU,GAC3BE,YAAW,WACT,EAAKzD,IAAIsD,QAAQC,KAChB,KA1IP,8BA6IE,SAAiB/B,GAGf,IC1J+BmB,ED0JzBe,ECzJF,yFAAN,QADiCf,ED0JUnB,GCtJpBmC,OAAS,6DAHhC,kBAGsGhB,EAAKiB,KAH3G,sHAOUjB,EAAKiB,KAPf,iDD0JQC,EAAa,IAAIrB,OAAOC,KAAKqB,WAAW,CAACC,QAASL,IACxD/D,KAAKuB,YAAYU,KAAKiC,KAlJ1B,gCAqJE,SAAmBnC,EAAQD,GAAQ,IAAD,OAChCC,EAAOsC,YAAY,SAAS,WAC1B,EAAKC,iBAAiBvC,EAAQD,GACI,oBAAvB,EAAK/B,eACd,EAAKA,cAAc+B,MAGvBC,EAAOsC,YAAY,aAAa,WAC9B,EAAK5C,OAAOyB,KAAKnB,GACiB,oBAAvB,EAAKjC,eACd,EAAKA,cAAcgC,MAGvBC,EAAOsC,YAAY,YAAY,WAC7B,EAAK5C,OAAO4B,OACsB,oBAAvB,EAAKvD,eACd,EAAKA,cAAc,WArK3B,6BA0KE,WAAmB,IAAD,OAChBE,KAAKK,IAAIgE,YAAY,SAAS,WAC5B,EAAKE,2BA5KX,8BAgLE,SAAiBxC,EAAQD,GACnB9B,KAAKuB,YAAYO,GAAO0C,SAC1BxE,KAAKuB,YAAYO,GAAO2C,SAExBzE,KAAKuE,sBACLvE,KAAKuB,YAAYO,GAAO4C,KAAK1E,KAAKK,IAAK0B,MArL7C,iCA6LE,WAAuB,IAAD,OACpB/B,KAAKuB,YAAYK,SAAQ,SAAC+C,EAAG7C,GAC3B,EAAKP,YAAYO,GAAO2C,aA/L9B,0BAmME,WAAgB,IAAD,OACbzE,KAAK0B,QAAQkD,QACb5E,KAAKwB,MAAMoD,QAEX5E,KAAKsB,QAAQM,SAAQ,SAACG,EAAQD,GAC5B,EAAKR,QAAQQ,GAAOsB,OAAO,SAE7BpD,KAAKsB,QAAU,GACftB,KAAKuB,YAAc,KA3MvB,+BA+ME,SAAkBO,GAEhBe,OAAOC,KAAK+B,MAAMC,QAAQ9E,KAAKsB,QAAQQ,GAAQ,WAjNnD,mCAmNE,SAAsBA,GAEpBe,OAAOC,KAAK+B,MAAMC,QAAQ9E,KAAKsB,QAAQQ,GAAQ,eArNnD,kCAuNE,SAAqBA,GACnBe,OAAOC,KAAK+B,MAAMC,QAAQ9E,KAAKsB,QAAQQ,GAAQ,cAxNnD,kBA2NE,WAAQ,IAAD,OACL,OAAO,IAAIiD,SAAQ,SAACC,EAASC,GAC3B,EAAKhF,OACFiF,OACAC,MAAK,WAMJ,OALA,EAAK9E,IAAM,IAAIwC,OAAOC,KAAKsC,IAAI,EAAK9E,aAAc,EAAKG,YACvD,EAAK4E,kBACL,EAAK5D,OAAS,IAAI6D,EAAO,EAAKjF,KAC9B,EAAKmB,MAAQ,IAAI+D,EAAM,EAAKlF,KAC5B,EAAKqB,QAAU,IAAI8D,EAAQ,EAAKnF,KACzB2E,OAERS,OAAM,SAACC,GAEN,OADAC,QAAQC,IAAI,wBAAyBF,GAC9BT,cAzOjB,KA+OMO,E,WACJ,WAAYnF,GAAM,oBAChBL,KAAK6F,cAAgB,KACrB7F,KAAKuD,OAAS,KACdvD,KAAKK,IAAMA,E,yCAGb,SAAMiB,GAEJtB,KAAK6F,cAAgB,IAAIC,IAAgB9F,KAAKK,IAAKiB,EAAS,CAC1DyE,UAAW,6F,sBAKf,SAASC,GACPhG,KAAKiG,OACLjG,KAAKuD,OAAO2C,OAAO,CACjBtF,KAAMoF,EAAKtD,YAAY9B,IACvBC,KAAMmF,EAAKtD,YAAY7B,Q,mBAI3B,WAC6B,OAAvBb,KAAK6F,gBACP7F,KAAKuD,OAAS,KACdvD,KAAK6F,cAAclE,kB,kBAIvB,WAEsB,OAAhB3B,KAAKuD,SACPvD,KAAKuD,OAAS,IAAIV,OAAOC,KAAKqD,kB,KAK9BZ,E,WACJ,WAAYlF,GAAM,oBAChBL,KAAKoG,kBAAoB,KACzBpG,KAAKqG,mBAAqB,KAC1BrG,KAAKK,IAAMA,EACXL,KAAKiG,O,wCAGP,WAAmB,IAAD,OAAbK,EAAa,uDAAJ,GACZ,GAAKA,EAAOnD,UAKRmD,EAAOC,OAAS,GAApB,CAGAvG,KAAKqG,mBAAmBjD,OAAOpD,KAAKK,KAMpC,IAAMmG,EAAU,CACdC,QALFH,EAASA,EAAOjG,KAAI,SAACqG,GACnB,OAAO,EAAKC,eAAeD,OAIZ,GAAGE,SAClBC,YAAaP,EAAOA,EAAOnD,OAAS,GAAGyD,SACvCE,mBAAmB,EACnBC,WAAYlE,OAAOC,KAAKkE,WAAWC,SAIjCX,EAAOnD,OAAS,IAClBqD,EAAQU,UAAYZ,EAAOa,OAAO,EAAGb,EAAOnD,OAAS,IAGvDnD,KAAKoG,kBAAkB5E,MAAMgF,GAAS,SAACY,EAAUC,GAChC,OAAXA,GAAmBD,EACrB,EAAKf,mBAAmBiB,cAAcF,GAEtCG,OAAOC,MAAM,oCAAsCH,S,4BAKzD,SAAetF,GACb,IAAMnB,EAAMmB,EAAOW,aAAeX,EAAOW,YAAY9B,IAAMmB,EAAO2B,cAAc9C,MAC1EC,EAAMkB,EAAOW,aAAeX,EAAOW,YAAY7B,IAAMkB,EAAO2B,cAAc7C,MAEhF,MAAO,CACL+F,SAAU,IAAI/D,OAAOC,KAAK2E,OAAO7G,EAAKC,GACtC6G,UAAU,K,mBAId,WACE1H,KAAKqG,mBAAmBjD,OAAO,Q,kBAGjC,WACEpD,KAAKoG,kBAAoB,IAAIvD,OAAOC,KAAK6E,kBAEzC3H,KAAKqG,mBAAqB,IAAIxD,OAAOC,KAAK8E,mBAAmB,CAC3DC,iBAAiB,EACjBC,kBAAkB,Q,KAUlBxC,E,WACJ,WAAYjF,GAAM,oBAChBL,KAAKwC,QAAU,CACbG,OAAQ,EACRoF,SAAS,EACTtF,SAAU,CACR7B,IAAK,YACLC,IAAK,aAEPmH,KAAM,CACJC,KAAMpF,OAAOC,KAAKoF,WAAWC,OAC7BC,UAAW,QACXC,YAAa,IACbC,YAAa,QACbC,cAAe,GACfC,aAAc,EACdC,MAAO,GACPC,OAAQ,IAAI7F,OAAOC,KAAK6F,MAAM,EAAG,IACjChG,OAAQ,GAEVtC,IAAKA,GAGPL,KAAKyB,OAAS,IAAIoB,OAAOC,KAAKC,OAAO/C,KAAKwC,S,wCAG5C,SAAKT,GACH,IAAMU,EAAWV,EAAO2B,cACxB1D,KAAKyB,OAAOmH,YAAYnG,GACxBzC,KAAKyB,OAAOoH,YAAW,K,kBAGzB,WACE7I,KAAKyB,OAAOoH,YAAW,O,0BEtYdC,EAAM,YCHO,SAACC,GAAoB,IAAfC,EAAc,uDAAN,EACtC,OAAO,YAAIC,MAAMD,IAAQ3I,KAAI,SAACsE,EAAG7C,GAM/B,OALAiH,EAAMG,KAAKC,MAAMD,KAAKE,UAAUL,KACxBM,eAAe,iBACrBN,EAAIrG,YAAY9B,KAAQ0I,KAAKC,SAAW,IACxCR,EAAIrG,YAAY7B,KAAQyI,KAAKC,SAAW,KAEnC,2BACFR,GADL,IAEES,IAAI,GAAD,OAAKT,EAAIS,IAAT,YAAgB1H,GACnBmC,KAAK,GAAD,OAAK8E,EAAI9E,KAAT,YAAiBnC,QDPD2H,CEKL,CACnBD,IAAK,WACLE,KAAM,QACNzF,KAAM,aACNvB,YAAa,CACX9B,IAAK,UACLC,IAAK,YFXmC,IGCtC8I,EAAaC,YAAY,CAC7B3F,KAAM,mBACN4F,aAAc,CACZf,OAAO,YAAKA,GACZgB,YAAa,KACbC,aAAc,MAEhBC,SAAU,CACRC,eADQ,SACOC,EAAOC,GACpBD,EAAMJ,YAAcK,EAAOC,SAE7BC,gBAJQ,SAIQH,EAAOC,GACrBD,EAAMH,aAAeI,EAAOC,SAE9BE,iBAPQ,SAOSJ,EAAOC,GACtBD,EAAMK,cAAN,YAA0BJ,EAAOC,aAKhC,EAGHT,EAAWa,QAFbH,EADK,EACLA,gBACAJ,EAFK,EAELA,eAGWQ,EAAmB,SAAAP,GAAK,OAAIA,EAAMQ,OAEhCf,IAAf,QC7BMgB,EAAaf,YAAY,CAC7B3F,KAAM,mBACN4F,aAAc,CACZrI,MAAO,IAETwI,SAAU,CACRY,gBADQ,SACQV,EAAOC,GACrBD,EAAM1I,MAAMS,KAAKkI,EAAOC,UAE1BS,qBAJQ,SAIaX,EAAOC,GAC1BD,EAAM1I,MAAQ,YAAI0I,EAAM1I,OAAOsJ,QAAO,SAACJ,GAAD,OAAWA,EAAMlB,MAAQW,EAAOC,QAAQZ,QAEhFuB,WAPQ,SAOGb,GACTA,EAAM1I,MAAQ,OAKb,EAIHmJ,EAAWH,QAHbI,EADK,EACLA,gBACAC,EAFK,EAELA,qBACAE,EAHK,EAGLA,WAGWC,EAAmB,SAAAd,GAAK,OAAIA,EAAM1I,OAEhCmJ,IAAf,Q,OCmEe/K,EAlFG,WAChB,IAAMqL,EAAWC,cACjB,EAA8CC,YAAYV,GAAlD3B,EAAR,EAAQA,OAAQgB,EAAhB,EAAgBA,YAAaC,EAA7B,EAA6BA,aACrBvI,EAAU2J,YAAYH,GAAtBxJ,MAER,EChByB,SAAC4J,GAC1B,IAAMC,EAAMC,mBAIZ,OAHAC,qBAAU,WACRF,EAAIG,QAAUJ,KAET,CACLK,SAAUJ,EAAIG,QACdA,QAASJ,GDYPM,CAAY3B,GAFJ4B,EADZ,EACEF,SACSG,EAFX,EAEEJ,QAEF,EAAsBK,mBAAS,MAA/B,mBAAOxL,EAAP,KAAY+C,EAAZ,KAEAmI,qBAAU,WACR,IAAMO,EAAO,IAAIC,EAAK,OAAQ,CAC5BhM,cAAe,SAAC+B,GAAYmJ,EAAShB,EAAenI,KACpDhC,cAAe,SAACgC,GAAYmJ,EAASZ,EAAgBvI,OAEvDgK,EAAK7F,OAAOd,MAAK,WACf2G,EAAKE,WAAWlD,MAElB1F,EAAO0I,KACN,IAEHP,qBAAU,WACHlL,GACLA,EAAI2L,WAAWlD,KACd,CAACA,IAEJyC,qBAAU,WACHlL,IACwB,OAAzBsL,GAAyD,OAAxBC,EAIR,OAAzBD,GAAyD,OAAxBC,GACnCvL,EAAI4L,mBAAmBnD,EAAOiB,IAJ9B1J,EAAI6L,sBAOL,CAACnC,IAEJwB,qBAAU,WACHlL,IAEAmB,EAAM2B,QACT9C,EAAImB,MAAMoD,QAGZvE,EAAImB,MAAM2K,KAAK3K,MACd,CAACA,IAMJ,OACE,sBAAK4K,UAAWC,IAAOC,KAAvB,UACE,sBAAKF,UAAWC,IAAOE,KAAvB,UACE,gCACE,4CAGA,yCAAYzC,KACZ,0CAAaC,KACb,wBAAQyC,QAbI,WAClBnM,EAAIiC,eAYE,4BAKe,OAAhBwH,GACC,sBAAKsC,UAAWC,IAAOrG,KAAvB,UACE,4BAAI8C,EAAOgB,GAAa7F,OACxB,wBAAQuI,QAAS,WAAOvB,EAAShB,EAAe,QAAhD,yBAON,qBAAKwC,GAAG,MAAML,UAAWC,IAAOhM,U,6CEhDvBsI,EApCD,SAAC+D,GACb,IAAMzB,EAAWC,cAEfR,EAGEgC,EAHFhC,MACA5I,EAEE4K,EAFF5K,MACG6K,EAHL,YAIID,EAJJ,GAKA,EAGIvB,YAAYV,GAFdX,EADF,EACEA,YACAC,EAFF,EAEEA,aAQF,OACE,gDACM4C,GADN,IAEEP,UAAS,oBACLC,IAAO3B,MADF,qBAELZ,IAAgBhI,EAAQuK,IAAOO,OAAS,GAFnC,qBAGL7C,IAAiBjI,EAAQuK,IAAOQ,QAAU,GAHrC,YAFX,UAQE,sBAAMT,UAAWC,IAAOpI,KAAxB,SACGyG,EAAMzG,OAET,wBAAQuI,QAjBO,SAAC3H,GAClBA,EAAMiI,kBACN7B,EAASL,EAAgBF,KAevB,+BCESqC,EA5BG,WAChB,MAGI5B,YAAYV,GAFd3B,EADF,EACEA,OACAgB,EAFF,EAEEA,YAEImB,EAAWC,cAEjB,OACE,sBAAK8B,MAAO,CAACC,SAAU,IAAKC,YAAa,IAAzC,UACGpE,EAAOzI,KAAI,SAAC2F,EAAMlE,GAAP,OACV,cAAC,EAAD,CAEE4I,MAAO1E,EACPlE,MAAOA,EACPqL,aAAc,kBAAMlC,EAASZ,EAAgBvI,KAC7CsL,aAAc,kBAAMnC,EAASZ,EAAgB,QAC7CmC,QAAS,kBAAMvB,EAAShB,EAAenI,MALlCkE,EAAKwD,QAQG,OAAhBM,GACC,wBAAQ0C,QAAS,kBAAMvB,EAAShB,EAAe,QAA/C,8B,iBCcO1E,EAjCD,WACZ,IAAM0F,EAAWC,cACT1J,EAAU2J,YAAYH,GAAtBxJ,MAER,OACE,sBAAK4K,UAAWC,IAAO7K,MAAvB,UACE,oBAAI4K,UAAWC,IAAOgB,KAAtB,SACG7L,EAAMnB,KAAI,SAAC2F,GAAD,OACT,qBAEEoG,UAAWC,IAAOrG,KAClBgH,MAAO,CACLM,QAAS,OACTC,cAAe,UALnB,UAQGvH,EAAK/B,KACN,wBACE+I,MAAO,CAACQ,UAAW,IACnBhB,QAAS,WAAOvB,EAASJ,EAAqB7E,KAFhD,sBARKA,EAAKwD,UAiBhB,wBAAQgD,QAAS,WAAOvB,EAASF,MAAjC,6BCVS0C,EAnBH,WACV,IAAQjM,EAAU2J,YAAYH,GAAtBxJ,MAER,OACE,gCACoB,IAAjBA,EAAM2B,QACL,cAAC,EAAD,IAEF,sBAAK6J,MAAO,CACVM,QAAS,OACTI,eAAgB,iBAFlB,UAIE,cAAC,EAAD,IACA,cAAC,EAAD,WCROC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB1I,MAAK,YAAkD,IAA/C2I,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,QCLRO,EAAgBvE,YAAY,CAChC3F,KAAM,mBACN4F,aAAc,CACZuE,WAAY,GACZC,OAAQ,IAEVrE,SAAU,KAIL,YAEHmE,EAAc3D,SAEX,IAEQ2D,IAAf,QCbeG,cAAe,CAC5BC,QAAS,CACP7D,MAAOf,EACPnI,MAAOmJ,EACP/D,SAAUuH,KCDdK,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUC,MAAOA,EAAjB,SACE,cAAC,EAAD,QAGJpO,SAASqO,eAAe,SAM1BjB,M","file":"static/js/main.75a8f86f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"GoogleMap_wrap__x_6vF\",\"head\":\"GoogleMap_head__A-WvM\",\"item\":\"GoogleMap_item__30zOT\",\"map\":\"GoogleMap_map__1K5Sh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"point\":\"Point_point__17pKl\",\"name\":\"Point_name__2HocH\",\"hovered\":\"Point_hovered__3pEGT\",\"active\":\"Point_active__1DbOg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"route\":\"Route_route__3QzlB\",\"list\":\"Route_list__dMC8H\",\"item\":\"Route_item__1zFDd\"};","/* eslint-disable */\nimport { Loader } from '@googlemaps/js-api-loader'\nimport MarkerClusterer from '@googlemaps/markerclustererplus'\n\nimport {\n  infoWindowTemplate,\n  MAP_STYLES_DARK,\n  MAP_STYLES_WHITE,\n} from './utils'\n\nexport class GoogleMap {\n  constructor(selector, { onMarkerHover, onMarkerClick} = {}) {\n    this.loader = new Loader({\n      apiKey: 'AIzaSyBOMQAKjVaaYfe_fSHNn3CBFcbNS651GnA',\n      version: 'weekly',\n    })\n\n    this.map = null\n    this.mapContainer = document.querySelector(selector)\n\n    this.mapOptions = {\n      // styles: MAP_STYLES_DARK,\n      zoom: 6,\n      center: {\n        lat: 49.30881846,\n        lng: 30.53801849,\n      },\n      clickableIcons: false, // клик на объекты карты и видеть информацию о них\n      // disableDefaultUI: true, // выключить все элементы элементы управления картой\n      zoomControl: true,\n      mapTypeControl: false,\n      scaleControl: true,\n      streetViewControl: false,\n      rotateControl: false,\n      fullscreenControl: true,\n      scrollwheel: true, // возможность масштабировать карту мышкой или тачпадом\n    }\n    this.markers = []\n    this.infoWindows = []\n    // this.pin = pin\n\n    this.route = null\n    this.circle = null\n    this.cluster = null\n\n    this.onMarkerHover = onMarkerHover\n    this.onMarkerClick = onMarkerClick\n  }\n\n  setMarkers(markers = []) {\n    // очищаем маркеры\n    this.clearMarkers()\n\n    markers.forEach((markerData, index) => {\n      // создаем маркер\n      const marker = this.createMarker(markerData)\n      // добавляем маркер в массив\n      this.markers.push(marker)\n      // добавляем новую позицию маркера для центрирования карты\n      this.cluster.setPoint(markerData)\n      // создаем модальное окно маркера\n      this.createInfoWindow(markerData)\n      // Добавляем события\n      this.addMarkerListeners(marker, index)\n    })\n\n    // группируем маркеры в класстере\n    this.cluster.group(this.markers)\n    this.centeredMap()\n  }\n\n  createMarker(marker, showOnMap = false) {\n    const options = {\n      position: {\n        lat: +marker.coordinates.lat,\n        lng: +marker.coordinates.lng,\n      },\n      zIndex: 10,\n      // https://developers.google.com/maps/documentation/javascript/reference/marker#Icon\n      // icon: {\n      //   url: marker.icon || this.pin,\n      //   size: new google.maps.Size(30, 30),\n      //   // если изображение меньше или больше 30px, масштабируем до 30\n      //   scaledSize: new google.maps.Size(30, 30),\n      // },\n      // https://developers.google.com/maps/documentation/javascript/reference/marker#MarkerLabel\n      // label: {\n      //   text: marker.name,\n      //   color: 'black',\n      //   fontFamily: 'Arial',\n      //   fontSize: '16',\n      //   fontWeight: '700',\n      //   className: 'custom-label-class',\n      // },\n    }\n\n    if (showOnMap) {\n      options.map = this.map\n    }\n\n    const newMarker = new google.maps.Marker(options)\n\n    return newMarker\n  }\n\n  // если маркеры сгруппированы в кластер\n  // при наведении на внешний объект, можно создать\n  // и отобразить маркер связанный с внешним объектом\n  // после чего, удалить маркер\n  handleCreateMarker(data) {\n    const showOnMap = true\n    const marker = this.createMarker(data, showOnMap)\n    marker.setZIndex(9)\n    this.markers.push(marker)\n    this.circle.show(marker)\n  }\n  removeLastMarker() {\n    this.markers[this.markers.length - 1].setMap(null)\n    this.circle.hide()\n  }\n\n  centeredMap() {\n    // центрируем карту относительно всех маркеров\n    if (this.markers.length > 1) {\n      this.map.fitBounds(this.cluster.bounds)\n      this.rebotMapZoom()\n      return\n    }\n\n    // Центрируем карту относительно одного маркера\n    if (this.markers.length === 1) {\n      this.map.setCenter(this.markers[0].getPosition())\n      this.map.setZoom(14)\n      return\n    }\n\n    // если маркеров нет, сбрасываем центр в исходную позицию\n    this.map.setCenter(this.mapOptions.center)\n    this.map.setZoom(this.mapOptions.zoom)\n  }\n\n  rebotMapZoom() {\n    // после обновление маркеров с 0 до n, они группируються в одном класстере\n    // сбрасываем зюм для предотарвщения группировки\n    const mapZoom = this.map.getZoom()\n    this.map.setZoom(mapZoom - 1)\n    setTimeout(() => {\n      this.map.setZoom(mapZoom)\n    }, 0)\n  }\n\n  createInfoWindow(markerData) {\n    // добавляем модальное окно\n    // infoWindowTemplate = шаблон модального окна карты в строковом формате\n    const modalTemplate = infoWindowTemplate(markerData)\n    const infoWindow = new google.maps.InfoWindow({content: modalTemplate})\n    this.infoWindows.push(infoWindow)\n  }\n\n  addMarkerListeners(marker, index) {\n    marker.addListener('click', () => {\n      this.toggleInfoWindow(marker, index)\n      if (typeof this.onMarkerClick === 'function') {\n        this.onMarkerClick(index)\n      }\n    })\n    marker.addListener('mouseover', () => {\n      this.circle.show(marker)\n      if (typeof this.onMarkerHover === 'function') {\n        this.onMarkerHover(index)\n      }\n    })\n    marker.addListener('mouseout', () => {\n      this.circle.hide()\n      if (typeof this.onMarkerHover === 'function') {\n        this.onMarkerHover(null)\n      }\n    })\n  }\n\n  addMapListeners() {\n    this.map.addListener('click', () => {\n      this.closeAllInfoWindows()\n    })\n  }\n\n  toggleInfoWindow(marker, index) {\n    if (this.infoWindows[index].getMap()) {\n      this.infoWindows[index].close()\n    } else {\n      this.closeAllInfoWindows()\n      this.infoWindows[index].open(this.map, marker)\n      // Центрируем карту относительно нужного маркера\n      // this.map.setCenter(marker.getPosition())\n      // приближаем карту\n      // this.map.setZoom(10)\n    }\n  }\n\n  closeAllInfoWindows() {\n    this.infoWindows.forEach((_, index) => {\n      this.infoWindows[index].close()\n    })\n  }\n\n  clearMarkers() {\n    this.cluster.clear()\n    this.route.clear()\n\n    this.markers.forEach((marker, index) => {\n      this.markers[index].setMap(null)\n    })\n    this.markers = []\n    this.infoWindows = []\n  }\n\n  // имитация экшинов по меркеру с внешних методов\n  handleClickMarker(index) {\n    // имитируем клик по маркеру\n    google.maps.event.trigger(this.markers[index], 'click')\n  }\n  handleMarkerMouseover(index) {\n    // Реализовать подсветку маркера\n    google.maps.event.trigger(this.markers[index], 'mouseover')\n  }\n  handleMarkerMouseout(index) {\n    google.maps.event.trigger(this.markers[index], 'mouseout')\n  }\n\n  init() {\n    return new Promise((resolve, reject) => {\n      this.loader\n        .load()\n        .then(() => {\n          this.map = new google.maps.Map(this.mapContainer, this.mapOptions)\n          this.addMapListeners()\n          this.circle = new Circle(this.map)\n          this.route = new Route(this.map)\n          this.cluster = new Cluster(this.map)\n          return resolve()\n        })\n        .catch((error) => {\n          console.log('GoogleMap init error:', error)\n          return reject()\n        })\n    })\n  }\n}\n\nclass Cluster {\n  constructor(map) {\n    this.markerCluster = null\n    this.bounds = null\n    this.map = map\n  }\n\n  group(markers) {\n    // группируем маркеры\n    this.markerCluster = new MarkerClusterer(this.map, markers, {\n      imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m',\n    })\n  }\n\n  // добавляем новую позицию маркера для центрирования карты\n  setPoint(item) {\n    this.init()\n    this.bounds.extend({\n      lat: +item.coordinates.lat,\n      lng: +item.coordinates.lng,\n    })\n  }\n\n  clear() {\n    if (this.markerCluster !== null) {\n      this.bounds = null\n      this.markerCluster.clearMarkers()\n    }\n  }\n\n  init() {\n    // переменная для определения границ маркеров\n    if (this.bounds === null) {\n      this.bounds = new google.maps.LatLngBounds()\n    }\n  }\n}\n\nclass Route {\n  constructor(map) {\n    this.directionsService = null\n    this.directionsRenderer = null\n    this.map = map\n    this.init()\n  }\n\n  draw(waypts = []) {\n    if (!waypts.length) {\n      return\n    }\n\n    // для отрисовки маршрута, точек на карте должно быть больше 2 и более\n    if (waypts.langth < 2) return\n\n    // связать маршрут с картой\n    this.directionsRenderer.setMap(this.map)\n\n    waypts = waypts.map((waypt) => {\n      return this.createWaypoint(waypt)\n    })\n\n    const request = {\n      origin: waypts[0].location, // определяем стартовую точку\n      destination: waypts[waypts.length - 1].location, // определяем конечную точку\n      optimizeWaypoints: true,\n      travelMode: google.maps.TravelMode.DRIVING,\n    }\n\n    // определяем промежуточные точки\n    if (waypts.length > 2) {\n      request.waypoints = waypts.splice(1, waypts.length - 2)\n    }\n\n    this.directionsService.route(request, (response, status) => {\n      if (status === \"OK\" && response) {\n        this.directionsRenderer.setDirections(response)\n      } else {\n        window.alert(\"Directions request failed due to \" + status);\n      }\n    })\n  }\n\n  createWaypoint(marker) {\n    const lat = marker.coordinates ? +marker.coordinates.lat : marker.getPosition().lat()\n    const lng = marker.coordinates ? +marker.coordinates.lng : marker.getPosition().lng()\n    // https://developers.google.com/maps/documentation/javascript/reference/directions#DirectionsWaypoint\n    return {\n      location: new google.maps.LatLng(lat, lng),\n      stopover: false,\n    }\n  }\n\n  clear() {\n    this.directionsRenderer.setMap(null)\n  }\n\n  init() {\n    this.directionsService = new google.maps.DirectionsService()\n    // https://developers.google.com/maps/documentation/javascript/reference/directions#DirectionsRendererOptions\n    this.directionsRenderer = new google.maps.DirectionsRenderer({\n      suppressMarkers: true, // Подавить рендеринг маркеров.\n      preserveViewport: true, // Отменить центрирование карты относительно маршрута\n      // https://developers.google.com/maps/documentation/javascript/reference/polygon#PolylineOptions\n      // polylineOptions: {\n      //   strokeColor: 'blue',\n      //   zIndex: 1,\n      // }\n    })\n  }\n}\n\nclass Circle {\n  constructor(map) {\n    this.options = {\n      zIndex: 2,\n      visible: false,\n      position: {\n        lat: 46.64288927,\n        lng: 31.07230514,\n      },\n      icon: {\n        path: google.maps.SymbolPath.CIRCLE,\n        fillColor: 'green',\n        fillOpacity: 0.15,\n        strokeColor: 'green',\n        strokeOpacity: 0.8,\n        strokeWeight: 1,\n        scale: 20,\n        anchor: new google.maps.Point(0, 0.8),\n        zIndex: 2\n      },\n      map: map\n    }\n\n    this.circle = new google.maps.Marker(this.options)\n  }\n\n  show(marker) {\n    const position = marker.getPosition()\n    this.circle.setPosition(position)\n    this.circle.setVisible(true)\n  }\n\n  hide() {\n    this.circle.setVisible(false)\n  }\n}\n","export const infoWindowTemplate = (data) => {\n  return `\n    <div class=\"map-window\">\n      <div class=\"map-window-img\">\n        <img src=\"${data.image || 'https://via.placeholder.com/100x50/000000/FFFFFF/?text=img'}\" alt=\"${data.name}\">\n      </div>\n      <div class=\"map-window-content\">\n        <h2 class=\"map-window-title\">\n          ${data.name}\n        </h2>\n      </div>\n    </div>\n  `\n}\n\nexport const MAP_STYLES_DARK = [\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"saturation\": 36\n      },\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 40\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      },\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 16\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 20\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 17\n      },\n      {\n        \"weight\": 1.2\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 20\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 21\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 17\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 29\n      },\n      {\n        \"weight\": 0.2\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 18\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 16\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 19\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 17\n      }\n    ]\n  }\n]\n\nexport const MAP_STYLES_WHITE = [\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"saturation\": 36\n      },\n      {\n        \"color\": \"#333333\"\n      },\n      {\n        \"lightness\": 40\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      },\n      {\n        \"color\": \"#ffffff\"\n      },\n      {\n        \"lightness\": 16\n      }\n    ]\n  },\n  {\n    \"featureType\": \"all\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#fefefe\"\n      },\n      {\n        \"lightness\": 20\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#fefefe\"\n      },\n      {\n        \"lightness\": 17\n      },\n      {\n        \"weight\": 1.2\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.country\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.province\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#f5f5f5\"\n      },\n      {\n        \"lightness\": 20\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#f5f5f5\"\n      },\n      {\n        \"lightness\": 21\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.park\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#dedede\"\n      },\n      {\n        \"lightness\": 21\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#ffffff\"\n      },\n      {\n        \"lightness\": 17\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#ffffff\"\n      },\n      {\n        \"lightness\": 29\n      },\n      {\n        \"weight\": 0.2\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway.controlled_access\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#ffffff\"\n      },\n      {\n        \"lightness\": 18\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#ffffff\"\n      },\n      {\n        \"lightness\": 16\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#f2f2f2\"\n      },\n      {\n        \"lightness\": 19\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#e9e9e9\"\n      },\n      {\n        \"lightness\": 17\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  }\n]\n","import { point } from \"./dbschema\";\nimport { arrayOfObj } from \"./utils\";\n\nexport const points = [...arrayOfObj(point, 5)]\n","export const arrayOfObj = (obj, count = 9) => {\n  return [...Array(count)].map((_, index) => {\n    obj = JSON.parse(JSON.stringify(obj))\n    if (obj.hasOwnProperty('coordinates')) {\n      obj.coordinates.lat -= (Math.random() / 100)\n      obj.coordinates.lng -= (Math.random() / 100)\n    }\n    return {\n      ...obj,\n      _id: `${obj._id}_${index}`,\n      name: `${obj.name} ${index}`\n    }\n  })\n}\n","export const category = {\n  _id: 'id:category',\n  type: 'category',\n  name: 'category name',\n  points: [\n    'id:point',\n  ]\n}\nexport const point = {\n  _id: 'id:point',\n  type: 'point',\n  name: 'point name',\n  coordinates: {\n    lat: 46.454428,\n    lng: 30.739338,\n  }\n}\nexport const location = {\n  _id: 'id:location',\n  type: 'location',\n  name: 'location name',\n  points: [\n    'id:point',\n  ],\n  locationPoints: [\n    {\n      _id: 'id:location_point',\n      type: 'location_point',\n      name: 'location point name',\n      map: {\n        lat: '46.454428',\n        lng: '30.739338',\n      }\n    }\n  ]\n}","import { createSlice } from '@reduxjs/toolkit'\n\nimport { points } from '../../utils/db'\n\nconst pointSlice = createSlice({\n  name: 'detailIngredient',\n  initialState: {\n    points: [...points],\n    activePoint: null,\n    hoveredPoint: null,\n  },\n  reducers: {\n    setActivePoint(state, action) {\n      state.activePoint = action.payload\n    },\n    setHoveredPoint(state, action) {\n      state.hoveredPoint = action.payload\n    },\n    setFiltredPoints(state, action) {\n      state.filtredPoints = [...action.payload]\n    }\n  },\n})\n\nexport const {\n  setHoveredPoint,\n  setActivePoint,\n} = pointSlice.actions\n\nexport const selectPointSlice = state => state.point\n\nexport default pointSlice.reducer\n","import { createSlice } from '@reduxjs/toolkit'\n\nconst routeSlice = createSlice({\n  name: 'detailIngredient',\n  initialState: {\n    route: [],\n  },\n  reducers: {\n    addPointToRoute(state, action) {\n      state.route.push(action.payload)\n    },\n    removePointFromRoute(state, action) {\n      state.route = [...state.route].filter((point) => point._id !== action.payload._id)\n    },\n    clearRoute(state) {\n      state.route = []\n    }\n  },\n})\n\nexport const {\n  addPointToRoute,\n  removePointFromRoute,\n  clearRoute,\n} = routeSlice.actions\n\nexport const selectRouteSlice = state => state.route\n\nexport default routeSlice.reducer\n","import React, { useEffect, useState } from 'react'\nimport styles from './GoogleMap.module.css'\nimport { GoogleMap as GMap } from '../../services/google/GoogleMap'\nimport { usePrevious } from '../../hooks/usePrevious'\n// redux\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  selectPointSlice,\n  setActivePoint,\n  setHoveredPoint,\n} from '../../store/slices/pointSlice'\nimport { selectRouteSlice } from '../../store/slices/routeSlice'\n\nconst GoogleMap = () => {\n  const dispatch = useDispatch()\n  const { points, activePoint, hoveredPoint } = useSelector(selectPointSlice)\n  const { route } = useSelector(selectRouteSlice)\n\n  const {\n    previous: previousHoveredPoint,\n    current: currentHoveredPoint,\n  } = usePrevious(hoveredPoint)\n  const [map, setMap] = useState(null)\n\n  useEffect(() => {\n    const gmap = new GMap('#map', {\n      onMarkerClick: (index) => { dispatch(setActivePoint(index)) },\n      onMarkerHover: (index) => { dispatch(setHoveredPoint(index)) },\n    })\n    gmap.init().then(() => {\n      gmap.setMarkers(points)\n    })\n    setMap(gmap)\n  }, [])\n\n  useEffect(() => {\n    if (!map) return\n    map.setMarkers(points)\n  }, [points])\n\n  useEffect(() => {\n    if (!map) return\n    if (previousHoveredPoint !== null && currentHoveredPoint === null) {\n      map.removeLastMarker()\n      return\n    }\n    if (previousHoveredPoint === null && currentHoveredPoint !== null) {\n      map.handleCreateMarker(points[hoveredPoint])\n      return\n    }\n  }, [hoveredPoint])\n\n  useEffect(() => {\n    if (!map) return\n\n    if (!route.length) {\n      map.route.clear()\n    }\n\n    map.route.draw(route)\n  }, [route])\n\n  const centeredMap = () => {\n    map.centeredMap()\n  }\n\n  return (\n    <div className={styles.wrap}>\n      <div className={styles.head}>\n        <div>\n          <h2>\n            Google map\n          </h2>\n          <p>active: {activePoint}</p>\n          <p>hovered: {hoveredPoint}</p>\n          <button onClick={centeredMap}>\n            centeredMap\n          </button>\n        </div>\n\n        {activePoint !== null && (\n          <div className={styles.item}>\n            <p>{points[activePoint].name}</p>\n            <button onClick={() => {dispatch(setActivePoint(null))}}>\n              close\n            </button>\n          </div>\n        )}\n      </div>\n\n      <div id=\"map\" className={styles.map}></div>\n    </div>\n  )\n}\n\nexport default GoogleMap\n","import { useEffect, useRef } from 'react'\n\nexport const usePrevious = (value) => {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return {\n    previous: ref.current,\n    current: value,\n  }\n}\n","import React from 'react'\nimport styles from './Point.module.css'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectPointSlice } from '../../store/slices/pointSlice'\nimport { addPointToRoute } from '../../store/slices/routeSlice'\n\nconst Point = (props) => {\n  const dispatch = useDispatch()\n  const {\n    point,\n    index,\n    ...otherProps\n  } = props\n  const {\n    activePoint,\n    hoveredPoint,\n  } = useSelector(selectPointSlice)\n\n  const addToRoute = (event) => {\n    event.stopPropagation()\n    dispatch(addPointToRoute(point))\n  }\n\n  return (\n    <div\n      {...otherProps}\n      className={`\n        ${styles.point}\n        ${activePoint === index ? styles.active : ''}\n        ${hoveredPoint === index ? styles.hovered : ''}\n      `}\n    >\n      <span className={styles.name}>\n        {point.name}\n      </span>\n      <button onClick={addToRoute}>\n        add to route\n      </button>\n    </div>\n  )\n}\n\nexport default Point\n","import React from 'react'\nimport Point from '../Point'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  selectPointSlice,\n  setActivePoint,\n  setHoveredPoint,\n} from '../../../store/slices/pointSlice'\n\nconst PointList = () => {\n  const {\n    points,\n    activePoint,\n  } = useSelector(selectPointSlice)\n  const dispatch = useDispatch()\n\n  return (\n    <div style={{minWidth: 200, marginRight: 20}}>\n      {points.map((item, index) => (\n        <Point\n          key={item._id}\n          point={item}\n          index={index}\n          onMouseEnter={() => dispatch(setHoveredPoint(index))}\n          onMouseLeave={() => dispatch(setHoveredPoint(null))}\n          onClick={() => dispatch(setActivePoint(index))}\n        />\n      ))}\n      {activePoint !== null && (\n        <button onClick={() => dispatch(setActivePoint(null))}>\n          Clear active\n        </button>\n      )}\n    </div>\n  )\n}\n\nexport default PointList\n","import React from 'react'\nimport styles from './Route.module.css'\n// redux\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  clearRoute,\n  removePointFromRoute,\n  selectRouteSlice,\n} from '../../store/slices/routeSlice'\n\nconst Route = () => {\n  const dispatch = useDispatch()\n  const { route } = useSelector(selectRouteSlice)\n\n  return (\n    <div className={styles.route}>\n      <ul className={styles.list}>\n        {route.map((item) => (\n          <li\n            key={item._id}\n            className={styles.item}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n          >\n            {item.name}\n            <button\n              style={{marginTop: 10}}\n              onClick={() => {dispatch(removePointFromRoute(item))}}\n            >\n              remove\n            </button>\n          </li>\n        ))}\n      </ul>\n      <button onClick={() => {dispatch(clearRoute())}}>\n        clear route\n      </button>\n    </div>\n  )\n}\n\nexport default Route\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport GoogleMap from '../google-map/GoogleMap'\nimport PointList from '../point/point-list/PointList'\nimport Route from '../route/Route'\nimport { selectRouteSlice } from '../../store/slices/routeSlice'\n\nconst App = () => {\n  const { route } = useSelector(selectRouteSlice)\n\n  return (\n    <div>\n      {route.length !== 0 && (\n        <Route />\n      )}\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between'\n      }}>\n        <PointList />\n        <GoogleMap />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createSlice } from '@reduxjs/toolkit'\n\nconst locationSlice = createSlice({\n  name: 'detailIngredient',\n  initialState: {\n    categories: [],\n    places: [],\n  },\n  reducers: {\n  },\n})\n\nexport const {\n  // ...reducers\n} = locationSlice.actions\n\nexport const selectLocationSlice = state => state.location\n\nexport default locationSlice.reducer\n","import { configureStore } from '@reduxjs/toolkit';\nimport locationSlice from './slices/locationSlice';\nimport pointSlice from './slices/pointSlice';\nimport routeSlice from './slices/routeSlice';\n\nexport default configureStore({\n  reducer: {\n    point: pointSlice,\n    route: routeSlice,\n    location: locationSlice,\n  },\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/globals.css';\nimport App from './components/app/App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux'\nimport store from './store/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}